# Докер для HTML Academy

## Запуск и работа с проектом

Работа с проектом происходит крайне просто.

* Скачайте и установите докер по инструкции (
[Ubuntu](https://docs.docker.com/install/linux/docker-ce/ubuntu/)
[Windows](https://docs.docker.com/docker-for-windows/install/)
[MacOs](https://docs.docker.com/docker-for-mac/install/)
)
* Для полноценной работы с приложением, желательно иметь установленные php и composer.
Способ установки можно найти на официальных сайтах.
* Клонируйте этот репозиторий `git clone https://github.com/windstep/htmalacademy-docker.git`
* Скопируйте ваш проект в папку `src`
* Если у вас уже занят порт 8080 и 3306,то поменяйте их на свободные
* Запустите командой `docker-compose up -d`
* Если вам нужно остановить проект - выполните команду `docker-compose down`

Теперь вы можете заходить в ваш любимый браузер и переходить по ссылке 
[localhost](http://localhost/) для доступа к сайту.

Также, доступен adminer для визуального редактирования базы данных.
Его можно найти по адресу [localhost:8080](http://localhost:8080/)

Если вам нужно подключение к базе данных напрямую 
(например для database tool в phpstorm, вы можете использовать
localhost в качестве хоста и 3306 в качестве порта)

Логин/пароль к базе данных такие: `root/secret`,
по умолчанию создана база данных `core`. Эти данные нужны например для adminer,
или подключения в любимой вами программе (database tool в phpstorm)

Чтобы подключиться к базе данных изнутри проекта - обращаться нужно
по имени контейнера в docker-compose - то есть хост будет `db`.
Соответственно, если вы используете `pdo`, то подключение будет выглядеть так:

`$pdoConnection = new \PDO('mysql:host=db;dbname=core', 'root', 'secret');`

Если же вы используете mysqli, то подключение будет выглядеть так:

`$mysqliConnection = new mysqli('db', 'root', 'secret', 'core');`

----

Если вы хотите пользоваться дополнительными утилитами для проверки вашего проекта,
можете выполнить следующие шаги:
* Проверьте, что у вас на компьютере установлены composer и php. `composer --version`, `php -v`
* Зайдите в папку с проектом и выполните команду `composer install`

После установки у вас будут доступны две команды: `composer run analyse` и `composer run codestyle`.
Эти же команды доступны с префиксом w для запуска под Windows: `composer run w-analyse` и `composer run w-codestyle`

Первая команда - статический анализатор вашего кода - проверяет на наличие глупых ошибок, вроде
не объявленных переменных или условий, которые всегда истинны / ложны а также ряда других.
Вторая команда сверяет код вашего проекта на соответствие его PSR-12, за исключением ошибки "Too long line".

## Что находится внутри

Краткое и очень понятное руководство по докеру, если вы совсем не знаете его
можно найти в [блоге AMD](https://blog.amd-nick.me/docker-introduction/).
Там оочень по верхам, но для понимания терминологии и некоторых базовых команд
как шпаргалка для вас может быть очень полезно.

Если вы знаете английский, смело идите на официальный сайт и читайте там раздел
get started.
